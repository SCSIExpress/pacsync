# Pacman Sync Utility Server Configuration
# AUR Package Configuration Template
# This file is installed to /etc/pacman-sync-utility/server.conf

server:
  # Server bind address and port
  host: "0.0.0.0"
  port: 8000
  
  # Database configuration
  database_url: "sqlite:///var/lib/pacman-sync-utility/database/server.db"
  
  # Logging configuration
  log_level: "INFO"
  log_file: "/var/lib/pacman-sync-utility/logs/server.log"
  
  # Environment: development or production
  environment: "production"
  
  # Worker processes (0 = auto-detect based on CPU cores)
  workers: 0
  
  # CORS origins for web UI access
  cors_origins:
    - "http://localhost:3000"
    - "http://127.0.0.1:3000"

security:
  # JWT secret key (auto-generated during installation)
  # DO NOT change this after initial setup unless you want to invalidate all tokens
  jwt_secret_key: "CHANGE_THIS_SECRET_KEY_ON_INSTALL"
  
  # JWT token expiration time in seconds (default: 1 hour)
  token_expiry: 3600
  
  # Enable API rate limiting
  enable_rate_limiting: true
  
  # API rate limit (requests per minute per client)
  api_rate_limit: 100
  
  # Admin API tokens for administrative operations (optional)
  admin_tokens: []
  
  # Force HTTPS redirect (when behind reverse proxy)
  force_https: false

database:
  # Database connection pool settings (for PostgreSQL)
  pool_min_size: 2
  pool_max_size: 10
  pool_timeout: 30
  
  # Database query timeout in seconds
  query_timeout: 30
  
  # Enable connection pooling
  enable_connection_pooling: true

features:
  # Enable automatic repository analysis
  enable_repository_analysis: true
  
  # Automatically clean up old package states
  auto_cleanup_old_states: true
  
  # Maximum age for old states in days
  max_state_age_days: 30
  
  # Enable operation audit logging
  enable_audit_logging: true
  
  # Enable performance monitoring
  enable_performance_monitoring: false

paths:
  # Data directory for database and persistent storage
  data_dir: "/var/lib/pacman-sync-utility"
  
  # Log directory
  log_dir: "/var/lib/pacman-sync-utility/logs"
  
  # Configuration directory
  config_dir: "/etc/pacman-sync-utility"

monitoring:
  # Health check configuration
  health_check_interval: 30
  health_check_timeout: 10
  
  # Enable structured logging (JSON format)
  structured_logging: true
  
  # Log format: json or text
  log_format: "json"
  
  # Enable request/response logging
  enable_request_logging: false

performance:
  # Maximum concurrent operations per endpoint
  max_concurrent_operations: 3
  
  # Operation timeout in seconds
  operation_timeout: 300

notifications:
  # Enable webhook notifications for sync events
  enable_webhooks: false
  
  # Webhook URLs for notifications
  webhook_urls: []
  
  # Webhook timeout in seconds
  webhook_timeout: 10
  
  # Retry failed webhooks
  webhook_retry_attempts: 3

backup:
  # Enable automatic database backups
  enable_backups: false
  
  # Backup directory
  backup_dir: "/var/backups/pacman-sync-utility"
  
  # Backup retention in days
  backup_retention_days: 7
  
  # Backup schedule (cron format) - daily at 2 AM
  backup_schedule: "0 2 * * *"